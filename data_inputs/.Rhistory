CT <- readOGR("C:/Users/wanh535/OneDrive - PNNL/Desktop/ICoM data/Population downscaling/Baltimore2010/BaltimoreCT2010.shp")
library(rgdal)
CT <- readOGR("C:/Users/wanh535/OneDrive - PNNL/Desktop/ICoM data/Population downscaling/Baltimore2010/BaltimoreCT2010.shp")
plot(CT)
head(CT@data)
CT@data <- CT@data[, c(1:15)]
head(CT@data)
impPer <- raster('C:/Users/wanh535/OneDrive - PNNL/Desktop/ICoM data/Population downscaling/1-m land cover data/urban_final.tif')
library(raster)
impPer <- raster('C:/Users/wanh535/OneDrive - PNNL/Desktop/ICoM data/Population downscaling/1-m land cover data/urban_final.tif')
crs(impPer)
crs(CR)
crs(CT)
impPer <- projectRaster(impPer, crs = crs(CT))
impPer <- projectRaster(impPer, crs = crs(CT))
impPer <- projectRaster(impPer, crs = crs(CT))
library(rgdal)
CT <- readOGR("C:/Users/wanh535/OneDrive - PNNL/Desktop/ICoM data/Population downscaling/Baltimore2010/BaltimoreCT2010.shp")
CT@data <- CT@data[, c(1:15)]
head(CT)
CT <- readOGR("C:/Users/wanh535/OneDrive - PNNL/Desktop/ICoM data/Population downscaling/Baltimore2010/BaltimoreCT2010.shp")
head(CT@data)
CT@data <- CT@data[, c(1:15)]
plot(CT)
impPer <- raster('C:/Users/wanh535/OneDrive - PNNL/Desktop/ICoM data/Population downscaling/1-m land cover data/urban_final.tif')
library(raster)
impPer <- raster('C:/Users/wanh535/OneDrive - PNNL/Desktop/ICoM data/Population downscaling/1-m land cover data/urban_final.tif')
impPer <- projectRaster(impPer, crs = crs(CT))
memory.limit()
memory.limit(size = 10000)
memory.limit(size = 5000)
memory.limit(size = 4000)
impPer <- projectRaster(impPer, crs = crs(CT))
memory.limit(size = 6000)
memory.limit(size = 5500)
memory.limit(size = 5000)
memory.limit(size = 4000)
memory.limit(size = 4500)
memory.limit(size = 4400)
memory.limit(size = 4300)
memory.limit(size = 4200)
memory.limit(size = 4100)
memory.limit(size = 4050)
impPer <- projectRaster(impPer, crs = crs(CT))
crs(impPer)
crs(CT)
install.packages("rpart")
data <- load(car90)
data <- load("car90")
data <- data(car90)
data <- data('car90')
estate <- st_read("C:/Users/wanh535/OneDrive - PNNL/Desktop/ICoM data/Historic Housing Prices/Static Multiple Linear Regression/estate.shp")
estate <- estate[estate$Status == "M", ]
library(data.table)
library(sf)
library(dplyr)
library(sp)
library(Metrics)
library(raster)
library(glmnet)
library(spdep)
#Read in geocoded estate data
estate <- st_read("C:/Users/wanh535/OneDrive - PNNL/Desktop/ICoM data/Historic Housing Prices/Static Multiple Linear Regression/estate.shp")
estate <- estate[estate$Status == "M", ]
head(estate)
install.packages("distancetocoast")
devtools::install_github("mdsumner/distancetocoast")
library(distancetocoast)
raster::extract(distance_to_coastline_lowres, cbind(147, -42))
test <- distance_to_coastline_lowres
crs(test)
test
test <- distance_to_coastline_10
test
install.packages("rnaturalearth")
us <- ne_coastline(scale = 10, returnclass = "sp")
library(rnaturalearth)
us <- ne_coastline(scale = 10, returnclass = "sp")
install.packages("rnaturalearthhires", repos = "http://packages.ropensci.org", type = "source")
x.list <- sapply(1:10000, list)
x.list
library(rstan)
library(MASS)
library(base)
library(bayesplot)
dat3 <- readRDS('C:/Users/wanh535/OneDrive - PNNL/Desktop/dlm/dat3.rda')
head(dat3)
library(data.table)
##########Processing 1990 data to 2010 block boundary
dir <- "C:/Users/wanh535/OneDrive - PNNL/Desktop/ICoM data/Population+income+household+employment/Blocks_to_blocks/Year 1990"
#Read in the cross-walk data
crosswalk <- fread(file.path(dir, 'nhgis_blk1990_blk2010_gj_24/nhgis_blk1990_blk2010_gj_24.csv'))
data <- fread(file.path(dir, 'nhgis0044_ds120_1990_block.csv'))
head(data)
data <- data[, c("GISJOIN", "ET1001", "EUO001")]
colnames(data)[2:3] <- c("pop1990", "hh1990")
head(data)
range(data$hh1990)
joined <- merge(crosswalk, data, by.x = "GJOIN1990", by.y = "GISJOIN", all.x = TRUE)
head(joined)
joined$prop_pop1990 <- joined$pop1990 * joined$WEIGHT
joined$prop_hh1990 <- joined$hh1990 * joined$WEIGHT
joined <- joined[, c("GJOIN2010", "prop_pop1990", "prop_hh1990")]
head(joined)
pop1990_final <- joined[, lapply(.SD, sum), by = GJOIN2010]
head(pop1990_final)
pop1990_final$hhsize1990 <- pop1990_final$prop_pop1990 / pop1990_final$prop_hh1990
pop1990_final[which(is.nan(pop1990_final$hhsize1990)), 'hhsize1990'] <- 0
head(pop1990_final)
View(pop1990_final)
which(is.infinite(pop1990_final$hhsize1990))
pop1990_final[3614, ]
range(pop1990_final$hhsize1990, na.rm = TRUE)
HEAD(DATA)
head(data)
setwd("C:/Users/wanh535/PycharmProjects/icom_abm/data_inputs")
list.files()
library(sf)
library(data.table)
block <- st_read("baltimore_blck.shp")
st_write(block, "test.shp")
census <- fread("blck_housing_1994.csv")
block <- merge(block, census, by = "GISJOIN")
which(is.na(block$mhi1990))
st_write(block, "baltimore_blck2.shp")
head(block)
colnames(block)
block <- block[, c(1:18)]
st_write(block, "baltimore_blck2.shp")
